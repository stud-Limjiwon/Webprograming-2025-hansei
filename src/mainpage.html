<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>장애인을 위한 IoT 연동 서비스</title>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/mainpage.css">
</head>


<body>
    <header class="header">
        <div id="main_logo" class="logo" style="cursor: pointer;"></div>
        <div id="auth-area">
            <button id="auth-btn" class="login-btn">로그인</button>
        </div>
    </header>

    <section class="hero-section">
        <div class="illustration-area">
            <img src="images/mainpage.png" alt="스마트폰, 키오스크, 휠체어를 사용하는 사람들을 연결하는 IoT 장치 일러스트">
        </div>
        <h1>장애인을 위한 IoT 연동 서비스</h1>
        <p class="subtitle">
            스마트폰과 연동하여 키오스크와 은행 업무를 더욱 편리하게 이용하세요.<br>
            장애 유형에 맞는 맞춤형 지원을 제공합니다.
        </p>
    </section>

    <section class="services-section">
        <h2 class="section-title">유형을 선택하세요.</h2>
        <div class="service-cards">
            
            <a href="func_visual.html" class="service-card">
                <h3 class="card-title">시각 장애인</h3>
                <div class="icon-placeholder">
                    <img src="images/visual.png" alt="시각 장애인 아이콘">
                </div>
            </a>
            
            <a href="func_hearing.html" class="service-card">
                <h3 class="card-title">청각 장애인</h3>
                <div class="icon-placeholder">
                    <img src="images/hearing.png" alt="청각 장애인 아이콘">
                </div>
            </a>
            
            <a href="func_physical.html" class="service-card">
                <h3 class="card-title">지체 장애인</h3>
                <div class="icon-placeholder">
                    <img src="images/physical.png" alt="지체 장애인 아이콘">
                </div>
            </a>
            
        </div>
    </section>
    <script>
    const authArea = document.getElementById('auth-area');
    const authBtn = document.getElementById('auth-btn');
    const mainLogo = document.getElementById('main_logo');

    // 1. 페이지 로드 시 로그인 상태 확인 (모든 페이지 공통 로직)
    window.onload = function() {
        const isLoggedIn = localStorage.getItem('isLoggedIn');
        if (isLoggedIn === 'true') {
            showLoggedInUI();
        }
    };

    // 2. 로고 클릭 시 메인 페이지로 이동
    if (mainLogo) {
        mainLogo.addEventListener('click', function() {
            window.location.href = 'mainpage.html';
        });
    }

    // 3. 로그인/로그아웃 버튼 클릭 이벤트
    authBtn.addEventListener('click', function() {
        const isLoggedIn = localStorage.getItem('isLoggedIn');
        if (isLoggedIn !== 'true') {
            window.location.href = 'login.html'; // 로그인 페이지로 이동
        } else {
            if (confirm("로그아웃하시겠습니까?")) {
                localStorage.removeItem('isLoggedIn');
                location.reload(); // 새로고침하여 초기 상태로 복구
            }
        }
    });

    // 로그인 성공 시 나타날 UI 함수
    function showLoggedInUI() {
        authBtn.innerText = "로그아웃";
        
        const myPageBtn = document.createElement('button');
        myPageBtn.innerText = "내 정보";
        myPageBtn.id = "mypage-btn";
        myPageBtn.className = "login-btn"; 
        myPageBtn.onclick = function() {
            window.location.href = 'mypage.html';
        };
        
        // [내 정보] 버튼을 [로그아웃] 버튼 앞에 배치
        authArea.insertBefore(myPageBtn, authBtn);
    }
</script>
</body>
</html>

